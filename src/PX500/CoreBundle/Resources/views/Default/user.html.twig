{% extends "PX500CoreBundle::base.html.twig" %}


{% block content %}
<h1>{{ user.username }}</h1>

<div id="chart" style="margin: auto; width: 1000px; height: 600px;"></div>

{% for photo in user.photos %}
    <div>
        <a href="{{ path('photo', {'uid':photo.uid }) }}">
            <img src="{{ photo.url }}"/>
        </a>
        <span>{{ photo.name }}</span>
        <span>{{ photo.rating }} ({{ photo.maxRating }})</span>
    </div>
{% endfor %}



<script>
google.setOnLoadCallback(drawChart_rating);
function drawChart_rating() {
    var data = google.visualization.arrayToDataTable([
        ['date', 'affection', 'followers'],
        {% for stat in user.stats %}
        ['{{ stat.date|date('Y-m-d') }}',{{ stat.affection }}, {{ stat.followers }}],
        {% endfor %}
    ]);
    var options = {
        chartArea:{
            left:70,
            top:50,
            width:"80%",
            height:"70%"},
        series: {
            0: {targetAxisIndex: 0},
            1: {targetAxisIndex: 1}
        },
        vAxis:{
            //viewWindow:{min:70},
            //type:'number',
            0: {title :''},
            1: {title :''}
        }
    };
    var chart = new google.visualization.LineChart(document.getElementById('chart'));
    chart.draw(data, options);
}
</script>

{% endblock content %}

